/*! Kramgo Tictail Theme - v0.1.0 - copyrightish (c) 2013-05-21 Alexander Aivars, Kramgo AB */(function(){var t,e,i,n,s;n=!1,i=!1,e=null,t="index",s=function(){var t,i,n,s,r,o,h,a,l,d,c,u,p;if(r=$(".variations_select_label"),r.length)for(h=0,d=r.length;d>h;h++)i=r[h],s=new krmg.SelectLable(i);if(krmg.ProductList.flush().load(),krmg.ProductList.index(),krmg.LazyImage.init(),krmg.LazyImage.load(),e.resize(),$(".product_slide_figure img").on("dragstart",function(t){return t.preventDefault(),!1}),r=$(".product_single .product_slide"),r.length)for(a=0,c=r.length;c>a;a++)i=r[a],o=new krmg.Swipe(i,{continuous:!0,disableScroll:!1,stopPropagation:!1,mouse:!0});if(r=$(".html_content"),r.length){for(p=[],l=0,u=r.length;u>l;l++)t=r[l],n=krmg.ELEMENT.insertLater(t),krmg.ELEMENT.wash(t),t.className=t.className.replace(/html_content\s*/,""),p.push(n());return p}},$(document).ready(function(){var i;return e=new krmg.SlideMenu($(".page_body").first()),s(),i=".page_column",$.sammy(i,function(){return this.get("/",function(e){"index"!==t&&e.load("/").then(function(t){krmg.HTML.read(t,i),s()})}),this.get(/products\/(.*)/,function(e){var n;return n=e.params.splat[0],t=n,e.load("/products/"+n).then(function(t){krmg.HTML.read(t,i),s()})}),this.get(/product\/(.*)/,function(t){var e,i;e=t.params.splat[0],i=$(".page_column a[href$='product/"+e+"']"),$(".page_column .selected").removeClass("selected"),i.addClass("selected"),krmg.ProductList.show(this.path)}),this.get(/page\/(.*)/,function(e){var n;n=e.params.splat[0],t=n,e.load("/page/"+n).then(function(t){return krmg.ProductList.flush(),krmg.HTML.read(t,i),s()})}),this.bind("event-context-after",function(){var t;t=$("a[href$='"+this.path.replace(/^\/\#|^\//,"")+"']"),$("a.selected").removeClass("selected"),t.length?t.addClass("selected"):$("a[href='/']").addClass("selected"),e.close()})}).run()}),$(window).on("scroll",function(){return n?void 0:(n=!0,window.requestAnimationFrame(function(){return krmg.LazyImage.load(),n=!1}))}),$(window).on("resize",function(){return i?void 0:(i=!0,window.requestAnimationFrame(function(){return krmg.ProductList.index(),krmg.LazyImage.load(),i=!1}))})}).call(this),function(){var t,e,i,n,s;null==(s=(n="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(n.krmg={}),t="data-src",i=[],e=function(t,e){var i,n;return i=t.offsetParent,n=t.parentNode.getBoundingClientRect(),0===n.top?i?n=i.getBoundingClientRect():!1:n.top>=0&&e>=n.top||n.bottom>=0&&e>=n.bottom},krmg.LazyImage={init:function(){var e,n,s,r;for(n=document.getElementsByTagName("img"),s=0,r=n.length;r>s;s++)e=n[s],null!=e.getAttribute(t)&&i.push(e);return this},load:function(){var t,n,s,r,o,h,a;for(t=window.innerHeight||document.documentElement.clientHeight,s=[],r=0,h=i.length;h>r;r++)n=i[r],e(n,t)&&s.push(n);for(o=0,a=s.length;a>o;o++)n=s[o],this.get(n);return this},get:function(e){var i;return i=e.getAttribute(t),e.src!==i&&(e.src=i),this}}}.call(this),function(){var t,e;null==(e=(t="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(t.krmg={}),krmg.SlideMenu=function(){function t(t){var e=this;this.container=t,this.menu=$(".page_menu").first(),this.tt=$("#tt_colophon").first(),this.content=[this.menu,this.container],this.tt.length&&this.content.push(this.tt),this.touch=Hammer(this.container),this.touch.on("dragleft dragright swipeleft swiperight release dragup dragdown",function(t){return e.touchHandler(t)}),this.navigation=this.container.find(".page_navigation").first(),this.width=256,this.close(),Hammer($("[data-action=menu-toggle]").first()).on("tap",function(t){return e.actionHandler(t)}),document.getElementById("tictail_search_box").disabled=!0,$(window).on("resize",function(){return e.resize()}),this.resize()}return t.prototype.actionHandler=function(t){return t.stopPropagation(),t.preventDefault(),"open"===this.state?this.close():this.open()},t.prototype.touchHandler=function(t){var e;switch(t.type){case"dragup":case"dragdown":this.change?(t.preventDefault(),t.gesture.preventDefault()):this.ignore=!0;break;case"dragright":case"dragleft":if(this.ignore)return;this.change=!0,t.preventDefault(),t.gesture.preventDefault(),e="open"===this.state?Math.max(0,Math.min(this.width,this.width+t.gesture.deltaX)):Math.max(0,Math.min(this.width,t.gesture.deltaX)),TweenLite.set(this.content,{x:e,overwrite:!0});break;case"swiperight":t.preventDefault(),this.open();break;case"swipeleft":t.preventDefault(),this.close();break;case"release":t.preventDefault(),this.change&&(Math.abs(t.gesture.deltaX)>.5*this.width?"open"===this.state?this.close():this.open():"open"===this.state?this.open():this.close()),this.ignore=!1,this.change=!1}},t.prototype.resize=function(){return this.navigation.css({minHeight:"auto"}),this.container.height()<$(window).height()&&this.navigation.css({minHeight:$(window).height()}),this},t.prototype.open=function(){var t=this;return TweenLite.to(this.content,.25,{x:this.width,overwrite:!0,onComplete:function(){return t.state="open",console.log("open"),setTimeout(function(){return document.getElementById("tictail_search_box").disabled=!1},400)}})},t.prototype.close=function(t){var e=this;return console.log(t),TweenLite.to(this.content,.25,{x:0,overwrite:!0,onComplete:function(){return e.state="closed",document.getElementById("tictail_search_box").disabled=!0}})},t}()}.call(this),function(){var t,e;t=function(t){var e,i;return i=t.parentNode,e=t.nextSibling,i.removeChild(t),function(){return e?i.insertBefore(t,e):i.appendChild(t)}},e=function(t){var i,n,s,r;if(t.removeAttribute("style"),t.children.length)for(r=t.children,n=0,s=r.length;s>n;n++)i=r[n],e(i);return t},$(document).ready(function(){var i,n,s,r,o;if(s=$(".html_content"),s.length)for(r=0,o=s.length;o>r;r++)i=s[r],n=t(i),e(i),i.className=i.className.replace(/html_content\s*/,""),n()})}.call(this),function(){var t,e,i;t=function(){function t(){this.list=[],this.first=[]}return t.prototype.show=function(t){var e,i,n,s,r,o,h,a,l;for(t=t.replace(krmg.RE.clean,""),e=null,a=this.list,s=0,o=a.length;o>s;s++)n=a[s],n.url===t&&(e=n);if(e){for(l=this.list,r=0,h=l.length;h>r;r++)n=l[r],n!==e&&n.row===e.row&&n.select(!1);return e.select(),this.active=e,this.insert_detail(e,e.row+1),i=0,TweenLite.to(window,.25,{scrollTo:{y:e.detail.offset().top-i,x:$(window).scrollLeft()},ease:Power2.easeIn}),this}},t.prototype.insert_detail=function(t,e){var i,n,s;this.container||(this.container=$(".product_list")),s=null,i=t.detail[0],n=t.container.parent()[0],this.first[e]&&(s=this.first[e].container[0]);try{n.insertBefore(i,s)}catch(r){console.log(r)}return this},t.prototype.load=function(){var t,e,i,n;if(e=$(".product_list .product"),e.length)for(i=0,n=e.length;n>i;i++)t=e[i],this.list.push(new krmg.Product($(t)));return this},t.prototype.index=function(){var t,e,i,n,s,r,o,h,a,l,d,c,u,p,f,g,m,w,v,x,y,k,b;for(s=r=-1,e=[];this.first.length;)this.first.pop();for(v=this.list,o=0,d=v.length;d>o;o++)t=v[o],t.selected&&(t.select(!1),e.push(t));for(x=this.list,h=0,c=x.length;c>h;h++)t=x[h],t.size("reset");for(y=this.list,a=0,u=y.length;u>a;a++)t=y[a],t.size("load");for(k=this.list,l=0,p=k.length;p>l;l++)t=k[l],t.size("write");for(b=this.list,m=0,f=b.length;f>m;m++)t=b[m],t.size().top>r&&(s++,this.first[s]=t),t.row=s,r=t.size().top;if(i=-1,this.active)for(w=0,g=e.length;g>w;w++)t=e[w],n=t.row+1,(t===this.active||t.row!==this.active.row&&n!==i)&&(this.insert_detail(t,n),t.select(!0),i=n);return this},t.prototype.flush=function(){for(this.active=null;this.first.length;)this.first.pop();for(;this.list.length;)this.list.pop()["delete"]();return this},t}(),null==(i=(e="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(e.krmg={}),krmg.ProductList=new t}.call(this),function(){var t,e;null==(e=(t="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(t.krmg={}),krmg.Product=function(){function t(t){this.container=t,this.teaser=this.container.find(".product_teaser").first(),this.detail=this.container.find(".product_detail").first(),this.slider=this.container.find(".product_slide").first(),this.images=this.container.find(".product_slide_figure img"),this.swipe=null,this.detail.detach(),this.detail.show(),this.row=0,this.url=this.teaser.attr("href").replace(krmg.RE.clean,"")}return t.prototype.select=function(t){var e,i,n,s,r;if(this.selected=null!=t?t:!0,this.selected){for(r=this.images,n=0,s=r.length;s>n;n++)e=r[n],i=e.getAttribute("data-src"),e.removeAttribute("data-src"),null!=i&&(e.src=i);!this.swipe&&this.images.length>1?this.swipe=new krmg.Swipe(this.slider[0],{continuous:!0,disableScroll:!1,stopPropagation:!1,mouse:!0}):this.swipe&&this.swipe.setup()}else this.detail.detach();return this},t.prototype.size=function(t){return"reset"===t||("load"===t?(this.container_bounds=this.container[0].getBoundingClientRect(),this.list_bounds=$(".product_list")[0].getBoundingClientRect()):(t="write")&&(this.slider.css({width:this.list_bounds.width,height:Math.round(this.list_bounds.width*(2/3))}),this.slider.width(this.list_bounds.width))),this.container_bounds},t.prototype.top=function(){return this.container.position().top},t.prototype["delete"]=function(){var t;for(t in this)this[t]instanceof jQuery&&this[t].off(),this.hasOwnProperty(t)&&(this[t]=null)},t}()}.call(this),function(){var t,e;null==(e=(t="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(t.krmg={}),krmg.SelectLable=function(){function t(t){return this.label=t instanceof jQuery?t:$(t),this.select=this.label.prev(),this.select.hasClass("tictail_variations_select")?(this.setup(),void 0):(this.label=null,this.select=null,void 0)}return t.prototype.prefix="",t.prototype.setup=function(){var t=this;this.select.on("change",function(){return t.changed()}),this.changed()},t.prototype.changed=function(){var t;try{return t=$(this.select[0].options[this.select[0].selectedIndex]),this.label.html(t[0].innerHTML)}catch(e){return console.log(e)}},t}()}.call(this),function(){"use strict";var t,e,i,n,s;e=function(){},i=function(t){return setTimeout(t||e,0)},t={addEventListener:!!window.addEventListener,touch:Modernizr.touch,transitions:Modernizr.csstransitions},null==(s=(n="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(n.krmg={}),krmg.Swipe=function(){function e(e,i){var n,s,r=this;return this.container=e,e?(this.options=i||{},this.element=e.children[0],this.index=parseInt(i.startSlide,10)||0,this.speed=i.speed||300,this.slides=null,this.slidePos=null,this.width=null,this.timer=null,this.interactive=!1,this.swiped=!1,this.delay=i.auto||0,this.interval=null,this.touch=Hammer(this.container),this.touch.on("touch dragleft swipeleft dragright swiperight release",function(t){return r.handleTouch(t)}),i.mouse&&this.touch.on("click mousemove mouseout",function(t){return r.handleMouse(t)}),this.onresize=function(){return requestAnimationFrame(function(){return r.setup()})},t.transitions&&(s=function(t){return r.handleTransition(t)},this.element.addEventListener("webkitTransitionEnd",s,!1),this.element.addEventListener("msTransitionEnd",s,!1),this.element.addEventListener("oTransitionEnd",s,!1),this.element.addEventListener("otransitionend",s,!1),this.element.addEventListener("transitionend",s,!1)),t.addEventListener?window.addEventListener("resize",function(){return r.onresize()}):window.onresize=this.onresize,this.setup(),this.delay&&setTimeout(function(){return r.begin()},i.delay||0),n={setup:function(){return r.setup(),r},slide:function(t,e){return r.slide(t,e),r},prev:function(){return r.stop(),r.prev(),r},next:function(){return r.stop(),r.next(),r},getPos:function(){return r.index},kill:function(){r.teardown()}},n.__proto__=this.__proto__,n):void 0}return e.prototype.teardown=function(){var e,i;for(this.stop(),this.element.style.width="auto",this.element.style.left=0,e=this.slides.length;e--;)i=this.slides[e],i.style.width="100%",i.style.left=0,t.transitions&&this.translate(e,0,0);this.touch.off("touch dragleft swipeleft dragright swiperight release"),this.touch.off("click mousemove mouseout"),t.addEventListener?window.removeEventListener("resize",this.onresize):window.onresize=null},e.prototype.setup=function(){var e,i,n;for(this.pageWidth=$(window).width(),this.slides=this.element.children,this.slidePos=Array(this.slides.length),e=this.container.getBoundingClientRect(),this.width=$(this.container).width(),this.height=$(this.container).height(),this.element.style.width=this.slides.length*this.width+"px",i=this.slides.length;i--;)n=this.slides[i],n.style.width=this.width+"px",n.setAttribute("data-index",i),t.transitions&&(n.style.left=i*-this.width+"px",this.move(i,this.index>i?-this.width:i>this.index?this.width:0,0));t.transitions||(this.element.style.left=this.index*-this.width+"px"),this.container.style.visibility="visible"},e.prototype.translate=function(t,e,i){var n,s;n=this.slides[t],s=n&&n.style,s&&(s.webkitTransitionDuration=s.MozTransitionDuration=s.msTransitionDuration=s.OTransitionDuration=s.transitionDuration=i+"ms",s.webkitTransform="translate3d("+e+"px, 0, 0) scale3d(1,1,1)",s.msTransform=s.MozTransform=s.OTransform="translateX("+e+"px)")},e.prototype.move=function(t,e,i){this.translate(t,e,i),this.slidePos[t]=e},e.prototype.prev=function(){this.index?this.slide(this.index-1):this.options.continuous&&this.slide(this.slides.length-1)},e.prototype.next=function(){this.index<this.slides.length-1?this.slide(this.index+1):this.options.continuous&&this.slide(0)},e.prototype.slide=function(e,n){var s,r;if(this.index!==e){if(null==n&&(n=this.speed),t.transitions){for(s=Math.abs(this.index-e)-1,r=Math.abs(this.index-e)/(this.index-e);s--;)this.move((e>this.index?e:this.index)-s-1,this.width*r,0);this.move(this.index,this.width*r,n),this.move(e,0,n)}else this.animate(this.index*-this.width,e*-this.width,n);this.index=e,i(this.options.callback&&this.options.callback(this.index,this.slides[this.index]))}},e.prototype.animate=function(t,e,i){var n,s=this;return i?(n=+new Date,this.timer=setInterval(function(){var r;return r=+new Date-n,r>i?(s.element.style.left=e+"px",s.delay&&s.begin(),s.options.transitionEnd&&s.options.transitionEnd.call(event,s.index,s.slides[s.index]),clearInterval(s.timer),void 0):s.element.style.left=(e-t)*(Math.floor(100*(r/i))/100)+t+"px"},4),void 0):(this.element.style.left=e+"px",void 0)},e.prototype.begin=function(){var t=this;this.interval=setTimeout(function(){return t.next()},this.delay)},e.prototype.stop=function(){this.delay=0,clearTimeout(this.interval)},e.prototype.handleTransition=function(t){var e=this;parseInt(t.target.getAttribute("data-index"),10)===this.index&&(this.delay&&requestAnimationFrame(function(){return e.begin()}),this.options.transitionEnd&&this.options.transitionEnd.call(t,this.index,this.slides[this.index]))},e.prototype.render=function(){return this.interactive?(this.translate(this.index-1,this.lastDelta+this.slidePos[this.index-1],0),this.translate(this.index,this.lastDelta+this.slidePos[this.index],0),this.translate(this.index+1,this.lastDelta+this.slidePos[this.index+1],0)):void 0},e.prototype.handleMouse=function(t){var e;if(this.interactive){if("none"===this.clickAction)return;this.container.removeAttribute("data-click"),this.clickAction="none"}else if("click"===t.type)"next"===this.clickAction&&this.next(),"prev"===this.clickAction&&this.prev();else if("mouseout"===t.type)e=this.container.getBoundingClientRect(),(t.clientY<=e.top||t.clientY>=e.height+e.top||t.clientX<=e.left||t.clientX>=e.width+e.left)&&(this.container.removeAttribute("data-click"),this.clickAction="none");else if(t.pageX>.5*this.pageWidth){if("next"===this.clickAction)return;this.container.setAttribute("data-click","next"),this.clickAction="next"}else{if("prev"===this.clickAction)return;this.container.setAttribute("data-click","prev"),this.clickAction="prev"}},e.prototype.handleTouch=function(t){var e,i,n,s=this;switch(t.stopPropagation(),t.stopImmediatePropagation(),e=t.gesture.deltaX,clearTimeout(this.interval),t.type){case"touch":this.interactive=!0,this.swiped=!1;break;case"dragright":case"dragleft":t.gesture.preventDefault(),(!this.index&&e>0||this.index===this.slides.length-1&&0>e)&&(e/=Math.abs(e)/this.width+1),this.lastDelta=e,requestAnimationFrame(function(){return s.render()});break;case"swiperight":case"swipeleft":t.gesture.preventDefault(),this.interactive=!1,this.swiped=!1;break;case"release":this.interactive=!1,n=Math.abs(e)>.5*this.width||this.swiped,i=!this.index&&e>0||this.index===this.slides.length-1&&0>e,n&&!i?"left"===t.gesture.direction?(this.move(this.index-1,-this.width,0),this.move(this.index,this.slidePos[this.index]-this.width,this.speed),this.move(this.index+1,this.slidePos[this.index+1]-this.width,this.speed),this.index+=1):(this.move(this.index+1,this.width,0),this.move(this.index,this.slidePos[this.index]+this.width,this.speed),this.move(this.index-1,this.slidePos[this.index-1]+this.width,this.speed),this.index+=-1):(this.move(this.index-1,-this.width,this.speed),this.move(this.index,0,this.speed),this.move(this.index+1,this.width,this.speed))}},e}()}.call(this),function(){var t,e;null==(e=(t="undefined"!=typeof exports&&null!==exports?exports:this).krmg)&&(t.krmg={}),krmg.RE={wash1:/<(script|head|style|iframe|frame|noscript)[^\>]*>[\s\S]*?<\/.*?\1>/gi,wash2:/<(!doctype|head|html|body).*?>/gi,wash3:/<\/.*?(head|html|body)>/gi,wash4:/<!--[\s\S]*?-->/gi,clean:/^\/\#|^\/|\#|\/\#/},krmg.HTML={wash:function(t){return t=t.replace(krmg.RE.wash1,""),t=t.replace(krmg.RE.wash2,""),t=t.replace(krmg.RE.wash3,""),t=t.replace(krmg.RE.wash4,"")},read:function(t,e){var i,n;if(t=this.wash(t),n=document,null!=document.implementation&&null!=document.implementation.createHTMLDocument)try{n=document.implementation.createHTMLDocument("")}catch(s){n=document}i=n.createElement("div"),i.innerHTML=t,$(e).first().html($(i).find(e).first().html());try{return TT.store.domReady()}catch(s){return console.log("Missing TT.store.domReady")}}},krmg.ELEMENT={wash:function(t){var e,i,n,s;if(t.removeAttribute("style"),t.children.length)for(s=t.children,i=0,n=s.length;n>i;i++)e=s[i],this.wash(e);return t},insertLater:function(t){var e,i;return i=t.parentNode,e=t.nextSibling,i.removeChild(t),function(){return e?i.insertBefore(t,e):i.appendChild(t)}}}}.call(this);